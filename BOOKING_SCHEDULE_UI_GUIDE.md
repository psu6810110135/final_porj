# ğŸ¯ à¸„à¸¹à¹ˆà¸¡à¸·à¸­à¸à¸²à¸£à¹ƒà¸Šà¹‰à¸‡à¸²à¸™à¸£à¸°à¸šà¸šà¸ˆà¸­à¸‡à¸—à¸±à¸§à¸£à¹Œà¹à¸šà¸šà¹€à¸¥à¸·à¸­à¸à¸§à¸±à¸™à¸—à¸µà¹ˆ

## âœ… à¸ªà¸´à¹ˆà¸‡à¸—à¸µà¹ˆà¹à¸à¹‰à¹„à¸‚à¹à¸¥à¹‰à¸§

### ğŸ”§ Backend (à¹à¸à¹‰à¹„à¸‚ 3 à¹„à¸Ÿà¸¥à¹Œ)

#### 1. `/src/bookings/dto/create-booking.dto.ts`
**à¹€à¸›à¸¥à¸µà¹ˆà¸¢à¸™ UUID validation à¸ˆà¸²à¸à¹€à¸‚à¹‰à¸¡à¸‡à¸§à¸”à¹€à¸›à¹‡à¸™à¸¢à¸·à¸”à¸«à¸¢à¸¸à¹ˆà¸™**
```typescript
// à¸à¹ˆà¸­à¸™ âŒ
@IsUUID('4')  // à¸£à¸±à¸šà¹€à¸‰à¸à¸²à¸° UUID version 4
tourScheduleId!: string;

// à¸«à¸¥à¸±à¸‡ âœ…
@IsUUID()     // à¸£à¸±à¸šà¸—à¸¸à¸ UUID version
tourScheduleId!: string;
```

#### 2. `/src/bookings/dto/calculate-booking.dto.ts`
**à¹€à¸›à¸¥à¸µà¹ˆà¸¢à¸™à¹à¸šà¸šà¹€à¸”à¸µà¸¢à¸§à¸à¸±à¸™**
```typescript
@IsUUID()
tourScheduleId!: string;
```

#### 3. `/src/tours/dto/create-tour.dto.ts`
**à¹€à¸à¸´à¹ˆà¸¡ `description` à¹€à¸›à¹‡à¸™ required**
```typescript
@IsString()
@IsNotEmpty()  // â† à¹€à¸à¸´à¹ˆà¸¡
description!: string;
```

---

### ğŸ¨ Frontend (à¹à¸à¹‰à¹„à¸‚ 1 à¹„à¸Ÿà¸¥à¹Œ)

#### `/src/pages/TourDetailPage.tsx` - à¹€à¸›à¸¥à¸µà¹ˆà¸¢à¸™à¹à¸›à¸¥à¸‡à¹ƒà¸«à¸à¹ˆ!

**1. à¹€à¸à¸´à¹ˆà¸¡ Schedule Interface**
```typescript
interface Schedule {
  id: string;
  tour_id: string;
  available_date: string;
  max_capacity_override: number | null;
  is_available: boolean;
  booked_seats?: number;
  available_seats?: number;
  created_at: string;
}
```

**2. à¹€à¸à¸´à¹ˆà¸¡ State Management**
```typescript
const [schedules, setSchedules] = useState<Schedule[]>([]);
const [selectedSchedule, setSelectedSchedule] = useState<Schedule | null>(null);
const [loadingSchedules, setLoadingSchedules] = useState(true);
```

**3. à¹€à¸à¸´à¹ˆà¸¡ API Call à¸”à¸¶à¸‡ Schedules**
```typescript
useEffect(() => {
  const fetchSchedules = async () => {
    const res = await api.get(`/api/v1/tours/${tour.id}/schedules`);
    const data = res.data || [];
    
    // à¸à¸£à¸­à¸‡à¸§à¸±à¸™à¸—à¸µà¹ˆà¸œà¹ˆà¸²à¸™à¹„à¸›à¹à¸¥à¹‰à¸§
    const today = new Date();
    today.setHours(0, 0, 0, 0);
    const validSchedules = data.filter((s: Schedule) => {
      const scheduleDate = new Date(s.available_date);
      scheduleDate.setHours(0, 0, 0, 0);
      return scheduleDate >= today;
    });
    
    setSchedules(validSchedules);
  };
  fetchSchedules();
}, [tour.id]);
```

**4. à¸ªà¸£à¹‰à¸²à¸‡ UI à¹à¸ªà¸”à¸‡à¸§à¸±à¸™à¸—à¸µà¹ˆà¸§à¹ˆà¸²à¸‡/à¹€à¸•à¹‡à¸¡**
```typescript
<div className="space-y-2 max-h-64 overflow-y-auto">
  {schedules.map((schedule) => {
    const isFull = (schedule.available_seats ?? 0) <= 0 || !schedule.is_available;
    
    return (
      <button
        onClick={() => !isFull && setSelectedSchedule(schedule)}
        disabled={isFull}
        className={isFull ? 'cursor-not-allowed opacity-60' : 'hover:border-[#FF8400]'}
      >
        <p>{dateStr}</p>
        {isFull ? (
          <span className="text-red-500">à¹€à¸•à¹‡à¸¡à¹à¸¥à¹‰à¸§</span>
        ) : (
          <span>à¹€à¸«à¸¥à¸·à¸­ {availableSeats} à¸—à¸µà¹ˆ</span>
        )}
      </button>
    );
  })}
</div>
```

**5. à¸­à¸±à¸›à¹€à¸”à¸• Booking Payload**
```typescript
const payload = {
  tourId: tour.id,
  tourScheduleId: selectedSchedule.id,  // â† à¹ƒà¸Šà¹‰ schedule ID
  pax,
  contactInfo: { ... }
};
```

---

## ğŸš€ à¸§à¸´à¸˜à¸µà¹ƒà¸Šà¹‰à¸‡à¸²à¸™ (Step-by-Step)

### à¸ªà¸³à¸«à¸£à¸±à¸š Admin: à¸ªà¸£à¹‰à¸²à¸‡à¸—à¸±à¸§à¸£à¹Œà¸à¸£à¹‰à¸­à¸¡ Schedules

#### Step 1: à¸ªà¸£à¹‰à¸²à¸‡à¸—à¸±à¸§à¸£à¹Œ
```bash
POST http://localhost:3000/api/v1/tours
Content-Type: application/json

{
  "title": "à¹€à¸—à¸µà¹ˆà¸¢à¸§à¹€à¸Šà¸µà¸¢à¸‡à¹ƒà¸«à¸¡à¹ˆ 3 à¸§à¸±à¸™ 2 à¸„à¸·à¸™",
  "description": "à¸—à¸±à¸§à¸£à¹Œà¸„à¸£à¸šà¸§à¸‡à¸ˆà¸£à¹€à¸—à¸µà¹ˆà¸¢à¸§à¹€à¸Šà¸µà¸¢à¸‡à¹ƒà¸«à¸¡à¹ˆ",
  "price": 8900,
  "province": "à¹€à¸Šà¸µà¸¢à¸‡à¹ƒà¸«à¸¡à¹ˆ",
  "region": "North",
  "duration": "3 à¸§à¸±à¸™ 2 à¸„à¸·à¸™",
  "category": "Cultural",
  "max_group_size": 30,
  "image_cover": "https://example.com/image.jpg",
  
  "schedules": [
    { "date": "2026-03-15", "capacity": 25 },
    { "date": "2026-03-20", "capacity": 30 },
    { "date": "2026-03-25", "capacity": 20 }
  ]
}
```

**Response:**
```json
{
  "id": "7687ab32-e48b-4f6d-862d-8ddf8be9c925",
  "title": "à¹€à¸—à¸µà¹ˆà¸¢à¸§à¹€à¸Šà¸µà¸¢à¸‡à¹ƒà¸«à¸¡à¹ˆ 3 à¸§à¸±à¸™ 2 à¸„à¸·à¸™",
  "price": 8900,
  "is_active": true
}
```

#### Step 2: à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸š Schedules à¸—à¸µà¹ˆà¸ªà¸£à¹‰à¸²à¸‡
```bash
GET http://localhost:3000/api/v1/tours/7687ab32-e48b-4f6d-862d-8ddf8be9c925/schedules
```

**Response:**
```json
[
  {
    "id": "e460b6f1-0299-4f02-88c3-1f043c04899d",
    "available_date": "2026-03-15",
    "max_capacity_override": 25,
    "is_available": true,
    "booked_seats": 0,
    "available_seats": 25
  },
  {
    "id": "54e7d4c4-f18c-4fcc-81b5-994e7e992291",
    "available_date": "2026-03-20",
    "max_capacity_override": 30,
    "is_available": true,
    "booked_seats": 0,
    "available_seats": 30
  }
]
```

---

### à¸ªà¸³à¸«à¸£à¸±à¸š Customer: à¸ˆà¸­à¸‡à¸—à¸±à¸§à¸£à¹Œà¸œà¹ˆà¸²à¸™à¹€à¸§à¹‡à¸š

#### Step 1: à¹€à¸›à¸´à¸”à¸«à¸™à¹‰à¸²à¹€à¸§à¹‡à¸š
```bash
# à¹€à¸›à¸´à¸” Frontend
cd project/frontend
npm run dev

# à¹€à¸›à¸´à¸” Browser
http://localhost:5173
```

#### Step 2: à¹€à¸‚à¹‰à¸²à¸ªà¸¹à¹ˆà¸£à¸°à¸šà¸š
1. à¸„à¸¥à¸´à¸ **Login** à¸—à¸µà¹ˆà¸¡à¸¸à¸¡à¸‚à¸§à¸²à¸šà¸™
2. à¹ƒà¸ªà¹ˆ email/password
3. à¸«à¸¥à¸±à¸‡ login à¸ªà¸³à¹€à¸£à¹‡à¸ˆà¸ˆà¸°à¸à¸¥à¸±à¸šà¸¡à¸²à¸«à¸™à¹‰à¸²à¸«à¸¥à¸±à¸

#### Step 3: à¹€à¸¥à¸·à¸­à¸à¸—à¸±à¸§à¸£à¹Œ
1. à¹„à¸›à¸—à¸µà¹ˆà¸«à¸™à¹‰à¸² **Tours** à¸«à¸£à¸·à¸­à¸„à¸¥à¸´à¸à¸—à¸±à¸§à¸£à¹Œà¸ˆà¸²à¸à¸«à¸™à¹‰à¸²à¸«à¸¥à¸±à¸
2. à¸„à¸¥à¸´à¸à¸—à¸µà¹ˆà¸—à¸±à¸§à¸£à¹Œà¸—à¸µà¹ˆà¸•à¹‰à¸­à¸‡à¸à¸²à¸£
3. à¹€à¸‚à¹‰à¸²à¸ªà¸¹à¹ˆà¸«à¸™à¹‰à¸² Tour Detail

#### Step 4: à¹€à¸¥à¸·à¸­à¸à¸§à¸±à¸™à¸—à¸µà¹ˆà¹€à¸”à¸´à¸™à¸—à¸²à¸‡
**UI à¸ˆà¸°à¹à¸ªà¸”à¸‡:**
- ğŸ“… **à¸§à¸±à¸™à¸—à¸µà¹ˆà¸§à¹ˆà¸²à¸‡** - à¸„à¸¥à¸´à¸à¹„à¸”à¹‰ à¹à¸ªà¸”à¸‡ "à¹€à¸«à¸¥à¸·à¸­ X à¸—à¸µà¹ˆ"
- ğŸ”´ **à¸§à¸±à¸™à¸—à¸µà¹ˆà¹€à¸•à¹‡à¸¡** - disabled à¹à¸ªà¸”à¸‡ "à¹€à¸•à¹‡à¸¡à¹à¸¥à¹‰à¸§"
- ğŸš« **à¸§à¸±à¸™à¸—à¸µà¹ˆà¸œà¹ˆà¸²à¸™à¹„à¸›à¹à¸¥à¹‰à¸§** - à¹„à¸¡à¹ˆà¹à¸ªà¸”à¸‡ (à¸à¸£à¸­à¸‡à¸­à¸­à¸à¹à¸¥à¹‰à¸§)

**à¸•à¸±à¸§à¸­à¸¢à¹ˆà¸²à¸‡ UI:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ à¹€à¸¥à¸·à¸­à¸à¸§à¸±à¸™à¸—à¸µà¹ˆà¹€à¸”à¸´à¸™à¸—à¸²à¸‡                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â˜ à¸à¸¤. 15 à¸¡à¸µà¸™à¸²à¸„à¸¡ 2026               â”‚
â”‚   à¹€à¸«à¸¥à¸·à¸­ 25 à¸—à¸µà¹ˆ                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â˜‘ à¸ˆ. 20 à¸¡à¸µà¸™à¸²à¸„à¸¡ 2026   âœ“           â”‚
â”‚   à¹€à¸«à¸¥à¸·à¸­ 30 à¸—à¸µà¹ˆ                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â˜’ à¸. 25 à¸¡à¸µà¸™à¸²à¸„à¸¡ 2026  [disabled]    â”‚
â”‚   à¹€à¸•à¹‡à¸¡à¹à¸¥à¹‰à¸§                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

âœ“ à¹€à¸¥à¸·à¸­à¸à¸§à¸±à¸™à¸—à¸µà¹ˆà¹à¸¥à¹‰à¸§
  à¸§à¸±à¸™à¸ˆà¸±à¸™à¸—à¸£à¹Œà¸—à¸µà¹ˆ 20 à¸¡à¸µà¸™à¸²à¸„à¸¡ 2026
```

#### Step 5: à¹€à¸¥à¸·à¸­à¸à¸ˆà¸³à¸™à¸§à¸™à¸œà¸¹à¹‰à¹€à¸”à¸´à¸™à¸—à¸²à¸‡
```
à¸œà¸¹à¹‰à¹ƒà¸«à¸à¹ˆ  [ - ] 2 [ + ]  à¸¿8,900 / à¸„à¸™
à¹€à¸”à¹‡à¸     [ - ] 1 [ + ]  à¸¿5,340 / à¸„à¸™
```

#### Step 6: à¸à¸£à¸­à¸à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸•à¸´à¸”à¸•à¹ˆà¸­
- à¸Šà¸·à¹ˆà¸­-à¸ªà¸à¸¸à¸¥
- à¸­à¸µà¹€à¸¡à¸¥
- à¹€à¸šà¸­à¸£à¹Œà¹‚à¸—à¸£

#### Step 7: à¸ˆà¸­à¸‡à¸—à¸±à¸§à¸£à¹Œ
à¸„à¸¥à¸´à¸ **"à¸ˆà¸­à¸‡à¸—à¸±à¸§à¸£à¹Œà¹€à¸¥à¸¢ â†’"**

**Validations:**
1. âœ… à¸•à¹‰à¸­à¸‡à¹€à¸¥à¸·à¸­à¸à¸§à¸±à¸™à¸—à¸µà¹ˆ
2. âœ… à¸•à¹‰à¸­à¸‡à¹€à¸¥à¸·à¸­à¸à¸ˆà¸³à¸™à¸§à¸™à¸„à¸™ >= 1
3. âœ… à¸—à¸µà¹ˆà¸™à¸±à¹ˆà¸‡à¸•à¹‰à¸­à¸‡à¹€à¸à¸µà¸¢à¸‡à¸à¸­
4. âœ… à¸•à¹‰à¸­à¸‡à¸à¸£à¸­à¸à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸•à¸´à¸”à¸•à¹ˆà¸­
5. âœ… à¸•à¹‰à¸­à¸‡ login à¸à¹ˆà¸­à¸™

**Success Response:**
```
âœ… à¸ˆà¸­à¸‡à¸ªà¸³à¹€à¸£à¹‡à¸ˆ! à¸à¸£à¸¸à¸“à¸²à¸Šà¸³à¸£à¸°à¹€à¸‡à¸´à¸™à¸•à¸²à¸¡à¸‚à¸±à¹‰à¸™à¸•à¸­à¸™à¸—à¸µà¹ˆà¹„à¸”à¹‰à¸£à¸±à¸š
```

---

## ğŸ§ª à¸à¸²à¸£à¸—à¸”à¸ªà¸­à¸š (Test Cases)

### Test 1: à¸ˆà¸­à¸‡à¸§à¸±à¸™à¸—à¸µà¹ˆà¸§à¹ˆà¸²à¸‡ (à¸›à¸à¸•à¸´)
```bash
1. à¹€à¸¥à¸·à¸­à¸à¸§à¸±à¸™à¸—à¸µà¹ˆ 15 à¸¡à¸µà¸™à¸²à¸„à¸¡ (à¹€à¸«à¸¥à¸·à¸­ 25 à¸—à¸µà¹ˆ)
2. à¹€à¸¥à¸·à¸­à¸ 2 à¸„à¸™
3. à¸à¸£à¸­à¸à¸‚à¹‰à¸­à¸¡à¸¹à¸¥
4. à¸„à¸¥à¸´à¸à¸ˆà¸­à¸‡

âœ… Expected: à¸ˆà¸­à¸‡à¸ªà¸³à¹€à¸£à¹‡à¸ˆ
```

### Test 2: à¸ˆà¸­à¸‡à¸§à¸±à¸™à¸—à¸µà¹ˆà¹€à¸•à¹‡à¸¡
```bash
1. à¸à¸¢à¸²à¸¢à¸²à¸¡à¸„à¸¥à¸´à¸à¸§à¸±à¸™à¸—à¸µà¹ˆà¹à¸ªà¸”à¸‡ "à¹€à¸•à¹‡à¸¡à¹à¸¥à¹‰à¸§"

âœ… Expected: à¸„à¸¥à¸´à¸à¹„à¸¡à¹ˆà¹„à¸”à¹‰ (disabled)
```

### Test 3: à¸ˆà¸­à¸‡à¹€à¸à¸´à¸™à¸—à¸µà¹ˆà¸™à¸±à¹ˆà¸‡à¸§à¹ˆà¸²à¸‡
```bash
1. à¹€à¸¥à¸·à¸­à¸à¸§à¸±à¸™à¸—à¸µà¹ˆà¹€à¸«à¸¥à¸·à¸­ 5 à¸—à¸µà¹ˆ
2. à¹€à¸¥à¸·à¸­à¸ 10 à¸„à¸™
3. à¸„à¸¥à¸´à¸à¸ˆà¸­à¸‡

âŒ Expected: "à¸—à¸µà¹ˆà¸™à¸±à¹ˆà¸‡à¹„à¸¡à¹ˆà¸à¸­! à¹€à¸«à¸¥à¸·à¸­à¹€à¸à¸µà¸¢à¸‡ 5 à¸—à¸µà¹ˆ"
```

### Test 4: à¹„à¸¡à¹ˆà¹„à¸”à¹‰à¹€à¸¥à¸·à¸­à¸à¸§à¸±à¸™à¸—à¸µà¹ˆ
```bash
1. à¹„à¸¡à¹ˆà¹€à¸¥à¸·à¸­à¸à¸§à¸±à¸™à¸—à¸µà¹ˆ
2. à¸„à¸¥à¸´à¸à¸ˆà¸­à¸‡

âŒ Expected: "à¸à¸£à¸¸à¸“à¸²à¹€à¸¥à¸·à¸­à¸à¸§à¸±à¸™à¸—à¸µà¹ˆà¹€à¸”à¸´à¸™à¸—à¸²à¸‡"
```

### Test 5: à¸ˆà¸­à¸‡à¹‚à¸”à¸¢à¹„à¸¡à¹ˆà¹„à¸”à¹‰ Login
```bash
1. Logout
2. à¸à¸¢à¸²à¸¢à¸²à¸¡à¸ˆà¸­à¸‡

âŒ Expected: "à¸à¸£à¸¸à¸“à¸²à¹€à¸‚à¹‰à¸²à¸ªà¸¹à¹ˆà¸£à¸°à¸šà¸šà¸à¹ˆà¸­à¸™à¸ˆà¸­à¸‡à¸—à¸±à¸§à¸£à¹Œ"
```

---

## ğŸ“Š à¸•à¸±à¸§à¸­à¸¢à¹ˆà¸²à¸‡à¸à¸²à¸£à¹ƒà¸Šà¹‰à¸‡à¸²à¸™à¸ˆà¸£à¸´à¸‡

### Scenario: à¸—à¸±à¸§à¸£à¹Œà¹€à¸Šà¸µà¸¢à¸‡à¹ƒà¸«à¸¡à¹ˆà¸¡à¸µ 3 à¸§à¸±à¸™à¹ƒà¸«à¹‰à¸ˆà¸­à¸‡

| à¸§à¸±à¸™à¸—à¸µà¹ˆ | Capacity | à¸ˆà¸­à¸‡à¹à¸¥à¹‰à¸§ | à¹€à¸«à¸¥à¸·à¸­ | à¸ªà¸–à¸²à¸™à¸° | UI |
|--------|----------|---------|-------|-------|-----|
| 15 à¸¡à¸µ.à¸„. | 25 | 0 | 25 | à¸§à¹ˆà¸²à¸‡ | à¸„à¸¥à¸´à¸à¹„à¸”à¹‰ "à¹€à¸«à¸¥à¸·à¸­ 25 à¸—à¸µà¹ˆ" |
| 20 à¸¡à¸µ.à¸„. | 30 | 5 | 25 | à¸§à¹ˆà¸²à¸‡ | à¸„à¸¥à¸´à¸à¹„à¸”à¹‰ "à¹€à¸«à¸¥à¸·à¸­ 25 à¸—à¸µà¹ˆ" |
| 25 à¸¡à¸µ.à¸„. | 20 | 20 | 0 | à¹€à¸•à¹‡à¸¡ | disabled "à¹€à¸•à¹‡à¸¡à¹à¸¥à¹‰à¸§" |

**Customer à¹€à¸¥à¸·à¸­à¸à¸§à¸±à¸™à¸—à¸µà¹ˆ 20 à¸¡à¸µà¸™à¸²à¸„à¸¡:**
1. à¸„à¸¥à¸´à¸à¸§à¸±à¸™à¸—à¸µà¹ˆ â†’ border à¹€à¸›à¸¥à¸µà¹ˆà¸¢à¸™à¹€à¸›à¹‡à¸™à¸ªà¹‰à¸¡ + à¹à¸ªà¸”à¸‡à¹€à¸„à¸£à¸·à¹ˆà¸­à¸‡à¸«à¸¡à¸²à¸¢ âœ“
2. à¹€à¸¥à¸·à¸­à¸ 3 à¸„à¸™ (2 à¸œà¸¹à¹‰à¹ƒà¸«à¸à¹ˆ + 1 à¹€à¸”à¹‡à¸)
3. à¸à¸£à¸­à¸à¸‚à¹‰à¸­à¸¡à¸¹à¸¥
4. à¸ˆà¸­à¸‡ â†’ Backend à¸ªà¸£à¹‰à¸²à¸‡ booking à¸à¸£à¹‰à¸­à¸¡ `tourScheduleId`

**à¸«à¸¥à¸±à¸‡à¸ˆà¸­à¸‡:**
- à¸§à¸±à¸™à¸—à¸µà¹ˆ 20 à¸¡à¸µ.à¸„. à¹€à¸«à¸¥à¸·à¸­: 25 - 3 = **22 à¸—à¸µà¹ˆ**
- à¸–à¹‰à¸²à¸¡à¸µà¸„à¸™à¸ˆà¸­à¸‡à¸­à¸µà¸ 22 à¸„à¸™ â†’ à¸§à¸±à¸™à¸™à¸µà¹‰à¸ˆà¸°à¹à¸ªà¸”à¸‡ "à¹€à¸•à¹‡à¸¡à¹à¸¥à¹‰à¸§"

---

## ğŸ¨ UI Features

### âœ¨ Design Highlights

**1. Schedule List**
- à¹à¸ªà¸”à¸‡ scrollable list (max-height: 264px)
- à¸§à¸±à¸™à¸—à¸µà¹ˆà¹€à¸£à¸µà¸¢à¸‡à¸ˆà¸²à¸à¹ƒà¸à¸¥à¹‰à¸–à¸¶à¸‡à¹„à¸à¸¥
- à¹à¸ªà¸”à¸‡à¸§à¸±à¸™à¸—à¸µà¹ˆà¹€à¸›à¹‡à¸™à¸ à¸²à¸©à¸²à¹„à¸—à¸¢ + à¸§à¸±à¸™

**2. Available Status**
```css
/* à¸§à¹ˆà¸²à¸‡ */
border: 2px solid #e5e7eb
hover: border-[#FF8400]

/* à¹€à¸¥à¸·à¸­à¸à¹à¸¥à¹‰à¸§ */
border: 2px solid #FF8400
background: orange-50

/* à¹€à¸•à¹‡à¸¡ */
border: 2px solid #e5e7eb
opacity: 60%
cursor: not-allowed
```

**3. Visual Feedback**
- âœ… à¹€à¸„à¸£à¸·à¹ˆà¸­à¸‡à¸«à¸¡à¸²à¸¢ check à¹€à¸¡à¸·à¹ˆà¸­à¹€à¸¥à¸·à¸­à¸
- ğŸ”´ Badge "à¹€à¸•à¹‡à¸¡à¹à¸¥à¹‰à¸§" à¸ªà¸µà¹à¸”à¸‡
- ğŸŸ  à¸ˆà¸³à¸™à¸§à¸™à¸—à¸µà¹ˆà¹€à¸«à¸¥à¸·à¸­à¹€à¸›à¹‡à¸™à¸ªà¸µà¸ªà¹‰à¸¡
- â³ Loading spinner à¸‚à¸“à¸°à¹‚à¸«à¸¥à¸”

**4. Responsive**
- Mobile: stack à¸—à¸¸à¸à¸­à¸¢à¹ˆà¸²à¸‡
- Desktop: sidebar sticky

---

## ğŸ”§ Troubleshooting

### à¸›à¸±à¸à¸«à¸² 1: à¹„à¸¡à¹ˆà¹€à¸«à¹‡à¸™ Schedules
**à¸ªà¸²à¹€à¸«à¸•à¸¸:** Admin à¸¢à¸±à¸‡à¹„à¸¡à¹ˆà¸ªà¸£à¹‰à¸²à¸‡ schedules

**à¹à¸à¹‰à¹„à¸‚:**
```bash
POST /api/v1/tours/:tourId/schedules
{
  "available_date": "2026-03-15",
  "max_capacity_override": 25,
  "is_available": true
}
```

### à¸›à¸±à¸à¸«à¸² 2: Error "tourScheduleId must be a UUID"
**à¸ªà¸²à¹€à¸«à¸•à¸¸:** Frontend à¸ªà¹ˆà¸‡ ID à¸œà¸´à¸”à¸£à¸¹à¸›à¹à¸šà¸š

**à¹à¸à¹‰à¹„à¸‚:** à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸šà¸§à¹ˆà¸² `selectedSchedule.id` à¹€à¸›à¹‡à¸™ UUID à¸ˆà¸£à¸´à¸‡
```javascript
console.log('Selected:', selectedSchedule?.id);
// Output: "e460b6f1-0299-4f02-88c3-1f043c04899d" âœ…
```

### à¸›à¸±à¸à¸«à¸² 3: à¸§à¸±à¸™à¸—à¸µà¹ˆà¹€à¸•à¹‡à¸¡à¹à¸¥à¹‰à¸§à¹à¸•à¹ˆà¸¢à¸±à¸‡à¸„à¸¥à¸´à¸à¹„à¸”à¹‰
**à¸ªà¸²à¹€à¸«à¸•à¸¸:** Frontend cache à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¹€à¸à¹ˆà¸²

**à¹à¸à¹‰à¹„à¸‚:** Refresh à¸«à¸™à¹‰à¸²à¹€à¸§à¹‡à¸š à¸«à¸£à¸·à¸­ implement real-time polling
```typescript
// à¹€à¸à¸´à¹ˆà¸¡ polling à¸—à¸¸à¸ 30 à¸§à¸´à¸™à¸²à¸—à¸µ
useEffect(() => {
  const interval = setInterval(fetchSchedules, 30000);
  return () => clearInterval(interval);
}, []);
```

### à¸›à¸±à¸à¸«à¸² 4: à¸§à¸±à¸™à¸—à¸µà¹ˆà¸œà¹ˆà¸²à¸™à¹„à¸›à¹à¸¥à¹‰à¸§à¸¢à¸±à¸‡à¹à¸ªà¸”à¸‡
**à¸ªà¸²à¹€à¸«à¸•à¸¸:** Timezone à¹„à¸¡à¹ˆà¸•à¸£à¸‡

**à¹à¸à¹‰à¹„à¸‚:** à¹ƒà¸Šà¹‰ `setHours(0, 0, 0, 0)` à¹€à¸à¸·à¹ˆà¸­à¹€à¸›à¸£à¸µà¸¢à¸šà¹€à¸—à¸µà¸¢à¸šà¹€à¸‰à¸à¸²à¸°à¸§à¸±à¸™à¸—à¸µà¹ˆ
```typescript
const today = new Date();
today.setHours(0, 0, 0, 0);
const scheduleDate = new Date(s.available_date);
scheduleDate.setHours(0, 0, 0, 0);
return scheduleDate >= today;
```

---

## ğŸ“± Screenshots à¸„à¸³à¸­à¸˜à¸´à¸šà¸²à¸¢

### à¸«à¸™à¹‰à¸² Tour Detail - Section à¸à¸²à¸£à¸ˆà¸­à¸‡

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  à¸£à¸²à¸„à¸²à¹€à¸£à¸´à¹ˆà¸¡à¸•à¹‰à¸™                               â”‚
â”‚  à¸¿8,900 / à¸„à¸™                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  à¹€à¸¥à¸·à¸­à¸à¸§à¸±à¸™à¸—à¸µà¹ˆà¹€à¸”à¸´à¸™à¸—à¸²à¸‡                         â”‚
â”‚                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚ à¸à¸¤. 15 à¸¡à¸µà¸™à¸²à¸„à¸¡ 2026            â”‚        â”‚
â”‚  â”‚ à¹€à¸«à¸¥à¸·à¸­ 25 à¸—à¸µà¹ˆ                   â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚ à¸ˆ. 20 à¸¡à¸µà¸™à¸²à¸„à¸¡ 2026      âœ“      â”‚ â† à¹€à¸¥à¸·à¸­à¸â”‚
â”‚  â”‚ à¹€à¸«à¸¥à¸·à¸­ 30 à¸—à¸µà¹ˆ                   â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚ à¸. 25 à¸¡à¸µà¸™à¸²à¸„à¸¡ 2026              â”‚ â† à¹€à¸•à¹‡à¸¡ â”‚
â”‚  â”‚ ğŸ”´ à¹€à¸•à¹‡à¸¡à¹à¸¥à¹‰à¸§                     â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚                                            â”‚
â”‚  âœ“ à¹€à¸¥à¸·à¸­à¸à¸§à¸±à¸™à¸—à¸µà¹ˆà¹à¸¥à¹‰à¸§                         â”‚
â”‚    à¸§à¸±à¸™à¸ˆà¸±à¸™à¸—à¸£à¹Œà¸—à¸µà¹ˆ 20 à¸¡à¸µà¸™à¸²à¸„à¸¡ 2026             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  à¸œà¸¹à¹‰à¹ƒà¸«à¸à¹ˆ  [ - ] 2 [ + ]  à¸¿8,900 / à¸„à¸™      â”‚
â”‚  à¹€à¸”à¹‡à¸     [ - ] 1 [ + ]  à¸¿5,340 / à¸„à¸™      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  à¸£à¸§à¸¡à¸—à¸±à¹‰à¸‡à¸«à¸¡à¸”: à¸¿23,140                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  à¸Šà¸·à¹ˆà¸­-à¸ªà¸à¸¸à¸¥: [___________________]         â”‚
â”‚  à¸­à¸µà¹€à¸¡à¸¥:    [___________________]         â”‚
â”‚  à¹€à¸šà¸­à¸£à¹Œà¹‚à¸—à¸£:  [___________________]         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚         [ à¸ˆà¸­à¸‡à¸—à¸±à¸§à¸£à¹Œà¹€à¸¥à¸¢ â†’ ]                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¯ à¸ªà¸£à¸¸à¸›

### âœ… Features à¸—à¸µà¹ˆà¸—à¸³à¸‡à¸²à¸™

1. **à¹à¸ªà¸”à¸‡à¸§à¸±à¸™à¸—à¸µà¹ˆà¸§à¹ˆà¸²à¸‡/à¹€à¸•à¹‡à¸¡** - UI à¸ªà¸§à¸¢à¸‡à¸²à¸¡ à¸¡à¸µ loading state
2. **à¸›à¹‰à¸­à¸‡à¸à¸±à¸™à¸ˆà¸­à¸‡à¸§à¸±à¸™à¹€à¸•à¹‡à¸¡** - disabled button + à¹à¸ªà¸”à¸‡ "à¹€à¸•à¹‡à¸¡à¹à¸¥à¹‰à¸§"
3. **à¸›à¹‰à¸­à¸‡à¸à¸±à¸™à¸ˆà¸­à¸‡à¸¢à¹‰à¸­à¸™à¸«à¸¥à¸±à¸‡** - à¸à¸£à¸­à¸‡à¸§à¸±à¸™à¸—à¸µà¹ˆà¸œà¹ˆà¸²à¸™à¹„à¸›à¹à¸¥à¹‰à¸§à¸­à¸­à¸
4. **Real-time capacity** - à¹à¸ªà¸”à¸‡à¸ˆà¸³à¸™à¸§à¸™à¸—à¸µà¹ˆà¹€à¸«à¸¥à¸·à¸­
5. **Visual feedback** - à¹€à¸¥à¸·à¸­à¸à¹à¸¥à¹‰à¸§à¸¡à¸µ checkmark
6. **Validation à¸„à¸£à¸šà¸–à¹‰à¸§à¸™** - à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸šà¸—à¸¸à¸ edge case

### ğŸ“‚ à¹„à¸Ÿà¸¥à¹Œà¸—à¸µà¹ˆà¹à¸à¹‰à¹„à¸‚

**Backend (3 files):**
1. `/src/bookings/dto/create-booking.dto.ts` - UUID validation
2. `/src/bookings/dto/calculate-booking.dto.ts` - UUID validation
3. `/src/tours/dto/create-tour.dto.ts` - description required

**Frontend (1 file):**
1. `/src/pages/TourDetailPage.tsx` - Schedule UI + booking logic

### ğŸš€ Ready to Use

**à¸ªà¸²à¸¡à¸²à¸£à¸–à¹ƒà¸Šà¹‰à¸‡à¸²à¸™à¹„à¸”à¹‰à¹€à¸¥à¸¢:**
```bash
# Backend
cd project/backend
npm run start:dev

# Frontend
cd project/frontend
npm run dev

# à¹€à¸›à¸´à¸” browser
http://localhost:5173
```

---

**Last Updated:** 2026-02-25  
**Status:** âœ… Production Ready
